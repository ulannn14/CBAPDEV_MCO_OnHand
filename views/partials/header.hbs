<nav id="header">
    <a href="/home" class="logo-link">
    <img src="/images/logo.png" alt="OnHand Logo" class="logo">
    </a>

    <div class="nav-links">
    <a href="/home" class="{{#if (eq currentPage 'home')}}active{{/if}}">Home</a>
    <a href="/chatbox" class="{{#if (eq currentPage 'chatbox')}}active{{/if}}">Messages</a>
    <a href="/bookings" class="{{#if (eq currentPage 'bookings')}}active{{/if}}">Bookings</a>
    </div>

    <button id="profileBtn" class="profile-btn" aria-expanded="false" aria-controls="profileSidebar" title="Account menu">
        {{#if user.avatar}}
        <img src="{{user.avatar}}" alt="{{user.name}}'s profile" class="profile-icon">
        {{else}}
        <img src="/images/profile-default.png" alt="Default profile" class="profile-icon">
        {{/if}}
    </button>
</nav>

<aside id="profileSidebar" class="profile-sidebar" role="dialog" aria-hidden="true" aria-labelledby="profileTitle">
    <header class="sidebar-header">
    <h3 id="profileTitle">Account</h3>
    <button id="closeSidebar" class="close-btn" aria-label="Close profile menu">âœ•</button>
    </header>

    <div class="sidebar-body">
    <div class="profile-summary">
        {{#if user.avatar}}
        <img src="{{user.avatar}}" alt="{{user.name}}" class="profile-thumb">
        {{else}}
        <img src="/images/profile-default.png" alt="Guest" class="profile-thumb">
        {{/if}}
        <div>
        <div class="name">{{#if user.name}}{{user.name}}{{else}}Guest{{/if}}</div>
        <div class="meta">{{#if user.location}}{{user.location}}{{/if}}</div>
        </div>
    </div>

    <nav class="sidebar-nav">
        <a href="/profile">Profile</a>
        <a href="/reports">My Reports</a>

        {{#if user.isProvider}}
        <button class="disabled" disabled>Apply as Service Provider (Already)</button>
        {{else}}
        <a href="/apply-provider">Apply as Service Provider</a>
        {{/if}}
    </nav>

    <div class="sidebar-actions">
        {{#if user.isProvider}}
        <div class="toggle-row">
            <label for="providerModeToggle">Service Provider Mode</label>
            <input id="providerModeToggle" type="checkbox" {{#if user.providerMode}}checked{{/if}} />
        </div>
        {{/if}}

        <form method="post" action="/logout" class="logout-form">
        <button type="submit" class="logout-btn">Logout</button>
        </form>
    </div>
    </div>
</aside>

<div id="sidebarBackdrop" class="sidebar-backdrop" hidden></div>